{% extends 'base.html' %}
{% block content %}

<section class="cart-section">
    <h2>ðŸ›’ Your Cart</h2>

    {% if items %}
    <div class="cart-container">
        {% for item in items %}
        <div class="cart-item">

            <!-- ðŸ”— PRODUCT IMAGE CLICKABLE -->
            <div class="cart-img">
                <a href="{% url 'product_detail' item.product.slug %}">
                    {% if item.product.images.first %}
                        <img src="{{ item.product.images.first.image.url }}" alt="{{ item.product.name }}">
                    {% else %}
                        <img src="/static/images/no-image.png" alt="No image available">
                    {% endif %}
                </a>
            </div>

            <div class="cart-details">

                <!-- ðŸ”— PRODUCT NAME CLICKABLE -->
                <h3>
                    <a href="{% url 'product_detail' item.product.slug %}" 
                       style="text-decoration:none; color:#333;">
                        {{ item.product.name }}
                    </a>
                </h3>

                <p class="category">{{ item.product.category.name }}</p>
                <p class="price">â‚¹{{ item.product.price }}</p>

                <div class="quantity">
                    <form action="{% url 'update_quantity' item.id %}" method="post">
                        {% csrf_token %}
                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1">
                        <button type="submit">Update</button>
                    </form>
                </div>

                <p class="subtotal">Subtotal: â‚¹{{ item.get_subtotal }}</p>

                <a href="{% url 'remove_cart_item' item.id %}" class="remove-btn">Remove</a>
            </div>

        </div>
        {% endfor %}
    </div>

    <div class="cart-total">
        <h3>Total: â‚¹{{ total }}</h3><br>
        <a href="{% url 'checkout' %}" class="checkout-btn">Proceed to Checkout</a>
    </div>

    {% else %}
    <p class="no-products">Your cart is empty.</p>
    {% endif %}
</section>

{% endblock %}

