{% extends 'base.html' %}
{% load static %}
{% block content %}

<style>
/* Wishlist Icon Styling */
.product-card {
    position: relative;
}

.wishlist-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #ffffff;
    padding: 6px 8px;
    border-radius: 50%;
    box-shadow: 0px 2px 5px rgba(0,0,0,0.15);
    cursor: pointer;
    z-index: 20;
}

.wishlist-icon i {
    font-size: 18px;
    color: #ff4d4d;
}
</style>

<section class="hero">
    <div class="hero-text">
        <h1>Welcome to <span>BuyBuddy</span> üõçÔ∏è</h1>
        <p>Your trusted online shopping companion ‚Äî find the best deals on everything!</p>
    </div>
</section>

<section class="products-section">
    <h2>üõí All Products</h2>

    <div class="products">
        {% for product in products %}
        <div class="product-card">

            <!-- ‚≠ê Wishlist Icon -->
            {% if request.user.is_authenticated %}
                <div class="wishlist-icon">
                    {% if product.id in wishlist_ids %}
                        <a href="{% url 'toggle_wishlist' product.id %}">
                            <i class="fa-solid fa-heart" style="color:red;"></i>
                        </a>
                    {% else %}
                        <a href="{% url 'toggle_wishlist' product.id %}">
                            <i class="fa-regular fa-heart"></i>
                        </a>
                    {% endif %}
                </div>
            {% endif %}

            <!-- Product Image (Clickable to Product Details) -->
            <a href="{% url 'product_detail' product.slug %}">
                {% if product.images.all %}
                    <img src="{{ product.images.first.image.url }}" alt="{{ product.name }}">
                {% else %}
                    <img src="{% static 'images/no-image.png' %}" alt="No Image">
                {% endif %}
            </a>

            <!-- Product Name -->
            <h3>
                <a href="{% url 'product_detail' product.slug %}">{{ product.name }}</a>
            </h3>

            <!-- Product Details -->
            <p class="price">‚Çπ{{ product.price }}</p>
            <p class="category">{{ product.category.name }}</p>

            <!-- Add to Cart Button -->
            <a href="{% url 'add_to_cart' product.id %}">
                <button class="add-btn">Add to Cart</button>
            </a>

        </div>
        {% empty %}
        <p class="no-products">No products available yet.</p>
        {% endfor %}
    </div>
</section>

{% endblock %}
